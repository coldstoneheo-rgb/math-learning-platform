# Math Learning Platform
# 학습 분석 엔진 고도화 종합 계획서

**문서 버전**: 1.0
**작성일**: 2025년 12월 26일
**작성자**: AI 아키텍처 컨설턴트

---

## 목차

1. [Executive Summary](#1-executive-summary)
2. [Perplexity 제안 분석 및 효용성 검증](#2-perplexity-제안-분석-및-효용성-검증)
3. [권장 아키텍처](#3-권장-아키텍처)
4. [Phase별 상세 구현 계획](#4-phase별-상세-구현-계획)
5. [VEHME 연동 계획](#5-vehme-연동-계획)
6. [데이터 요구사항 및 스키마](#6-데이터-요구사항-및-스키마)
7. [리스크 및 대응 방안](#7-리스크-및-대응-방안)
8. [KPI 및 성공 지표](#8-kpi-및-성공-지표)
9. [일정 및 마일스톤](#9-일정-및-마일스톤)

---

## 1. Executive Summary

### 1.1 현재 상황

- **플랫폼 규모**: 학생 약 25명, 학부모 약 25명, 선생님 1명
- **현재 기술 스택**: Next.js + Supabase + Google Gemini API
- **데이터 현황**: 시험 분석 리포트 (JSONB 형태), 구조화된 학습 데이터 부족

### 1.2 핵심 결론

| 구분 | 결론 |
|------|------|
| **지도학습 (Knowledge Tracing)** | ⭐ 도입 권장 (Phase 2) |
| **비지도학습 (군집화)** | ⭐ 도입 권장 (Phase 2) |
| **Apriori 연관규칙** | ⚠️ 제한적 채택 - 규칙 기반으로 대체 권장 |
| **강화학습 (RL)** | ⛔ 현 단계 부적합 - 데이터/규모 부족 |
| **VEHME 연동** | ⭐ PoC 권장 (API 접근성 확인 후) |

### 1.3 권장 전략

```
┌─────────────────────────────────────────────────────────────┐
│                    핵심 전략: "LLM First, ML Later"          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1️⃣ 현재 LLM(Gemini) 기반 분석 품질 극대화                  │
│  2️⃣ 구조화된 데이터 파이프라인 구축 (ML 준비)               │
│  3️⃣ 데이터 충분 시 Knowledge Tracing 도입                  │
│  4️⃣ RL은 사용자 1,000명+ 달성 시 재검토                    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 2. Perplexity 제안 분석 및 효용성 검증

### 2.1 제안된 5-Layer 아키텍처 평가

#### Layer 1: 데이터 레이어 ✅ 채택

| 평가 항목 | 점수 | 비고 |
|----------|------|------|
| 필요성 | ⭐⭐⭐⭐⭐ | 모든 분석의 기초 |
| 구현 난이도 | 중간 | 스키마 설계 + 마이그레이션 필요 |
| ROI | 높음 | 모든 후속 기능의 기반 |

**채택 이유**: 데이터 정규화는 필수. 현재 JSONB 기반 비정형 데이터를 정형화해야 함.

**수정 제안**:
- `item_response` 테이블은 필수
- `session_log`는 Phase 3 이후로 연기 (현재 세션 데이터 없음)

---

#### Layer 2: 전처리·특징 추출 ✅ 채택

| 평가 항목 | 점수 | 비고 |
|----------|------|------|
| 필요성 | ⭐⭐⭐⭐⭐ | 분석 품질의 핵심 |
| 구현 난이도 | 낮음-중간 | SQL/Python 파이프라인 |
| ROI | 높음 | 즉시 활용 가능 |

**채택 이유**: 집계 피처(topic별 정답률, 오답 유형 분포)는 LLM 프롬프트 품질 향상에도 즉시 활용 가능.

---

#### Layer 3: 지식 상태 추적 (지도학습) ⚠️ 조건부 채택

| 평가 항목 | 점수 | 비고 |
|----------|------|------|
| 필요성 | ⭐⭐⭐⭐ | 개인화의 핵심 |
| 구현 난이도 | 높음 | ML 인프라 필요 |
| ROI | 조건부 | 데이터 500+건/학생 필요 |

**효용성 분석**:

```
┌─────────────────────────────────────────────────────────────┐
│                    Knowledge Tracing 효용성                  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ✅ 장점                                                    │
│  • 학생별 개념 마스터리 확률 추정 가능                       │
│  • "다음 문제 정답 확률" 예측 → 적정 난이도 추천             │
│  • 교육 AI 분야에서 검증된 기법 (Coursera, Khan Academy)    │
│                                                             │
│  ⚠️ 현재 제약                                               │
│  • 학생 25명 × 시험 10회 = 약 250개 데이터포인트             │
│  • DKT 모델은 최소 500~1,000개 시퀀스 필요                  │
│  • 문항 단위 데이터(item_response) 없음                     │
│                                                             │
│  📌 결론: Phase 2에서 데이터 축적 후 도입                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**대안 (즉시 적용 가능)**:
- 규칙 기반 마스터리 추정: `topic별 정답률 > 80%` → 마스터
- Bayesian Knowledge Tracing (BKT): 소규모 데이터에서도 동작

---

#### Layer 4: 패턴 발굴 (비지도 + Apriori) ⚠️ 부분 채택

##### 4.1 군집화 (K-means) ✅ 채택

| 평가 항목 | 점수 | 비고 |
|----------|------|------|
| 필요성 | ⭐⭐⭐⭐ | 학생 유형 분류에 유용 |
| 구현 난이도 | 낮음 | sklearn으로 즉시 구현 |
| ROI | 중간 | 대시보드/리포트 활용 |

**활용 예시**:
- Cluster A: "고득점·빠른풀이형" → 도전 문제 추천
- Cluster B: "개념결손형" → 기초 복습 추천
- Cluster C: "계산실수형" → 연습량 증가 추천

##### 4.2 Apriori 연관규칙 ⛔ 비채택

| 평가 항목 | 점수 | 비고 |
|----------|------|------|
| 필요성 | ⭐⭐ | 교육 도메인에 부적합 |
| 구현 난이도 | 중간 | 데이터 전처리 필요 |
| ROI | **낮음** | 규칙 해석에 전문성 필요 |

**비채택 이유**:

```
┌─────────────────────────────────────────────────────────────┐
│                 Apriori 비채택 근거                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1️⃣ 데이터 부족                                             │
│     • Apriori는 최소 1,000~10,000 트랜잭션 필요             │
│     • 현재: 25명 × 10시험 = 250 트랜잭션                    │
│                                                             │
│  2️⃣ 도메인 부적합                                           │
│     • Apriori는 장바구니 분석(이커머스)에 최적화            │
│     • 교육에서는 "개념 선수관계 그래프"가 더 효과적         │
│                                                             │
│  3️⃣ 해석 어려움                                             │
│     • {원주각 오류} ⇒ {회전체 오류}의 인과관계 불명확       │
│     • 교사가 직접 규칙을 검토해야 하는 오버헤드             │
│                                                             │
│  📌 대안: 개념 선수관계 그래프 (Knowledge Graph)            │
│     • 수학 개념 간 선수학습 관계를 명시적으로 정의          │
│     • 취약 개념 발견 시 선수 개념부터 복습 경로 제시        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

#### Layer 5: 강화학습 (RL) ⛔ 현 단계 비채택

| 평가 항목 | 점수 | 비고 |
|----------|------|------|
| 필요성 | ⭐⭐ | 장기 최적화에 유용하나 현재 불필요 |
| 구현 난이도 | **매우 높음** | 환경 설계, 보상 설계, 안전장치 |
| ROI | **매우 낮음** | 데이터/규모 심각하게 부족 |

**비채택 이유**:

```
┌─────────────────────────────────────────────────────────────┐
│                    RL 비채택 근거                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1️⃣ Cold Start 문제                                         │
│     • RL은 수천~수만 건의 인터랙션 데이터 필요              │
│     • 신규 학생에게 적용 불가 (충분한 데이터 축적 전)       │
│                                                             │
│  2️⃣ 보상 설계의 어려움                                      │
│     • "좋은 학습"의 정의가 복잡                             │
│     • 단기 정답률 vs 장기 성적 향상의 trade-off             │
│     • 잘못된 보상 설계 → 시스템이 엉뚱한 방향으로 최적화    │
│                                                             │
│  3️⃣ 안전성 문제                                             │
│     • RL이 "너무 어려운 문제만 추천"하는 경우               │
│     • 학생 이탈 위험 → 사람 개입 필수                       │
│                                                             │
│  4️⃣ 비용 대비 효과                                          │
│     • 구현에 3-6개월 소요                                   │
│     • 규칙 기반 추천과 성능 차이 미미 (소규모 데이터)       │
│                                                             │
│  📌 대안: 규칙 기반 추천 + 교사 피드백 루프                 │
│     • if 취약개념 존재 → 기초 문제 추천                     │
│     • if 정답률 > 90% → 도전 문제 추천                      │
│     • 교사가 추천 결과를 검토하고 피드백                    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

### 2.2 종합 효용성 평가 매트릭스

| 기술 | 이론적 효용 | 현실적 적용성 | 구현 비용 | ROI | 최종 판정 |
|------|------------|--------------|----------|-----|----------|
| 데이터 정규화 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 낮음 | 높음 | ✅ 즉시 채택 |
| 피처 엔지니어링 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 낮음 | 높음 | ✅ 즉시 채택 |
| Knowledge Tracing | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | 높음 | 중간 | ⚠️ Phase 2 |
| K-means 군집화 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | 낮음 | 중간 | ✅ 즉시 채택 |
| Apriori | ⭐⭐ | ⭐ | 중간 | 낮음 | ⛔ 비채택 |
| 강화학습 (RL) | ⭐⭐⭐⭐⭐ | ⭐ | 매우 높음 | 매우 낮음 | ⛔ 비채택 |
| LLM 프롬프트 최적화 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 낮음 | 높음 | ✅ 즉시 채택 |
| VEHME 연동 | ⭐⭐⭐⭐ | ⭐⭐⭐ | 중간 | 중간 | ⚠️ PoC 후 결정 |

---

## 3. 권장 아키텍처

### 3.1 최종 권장 아키텍처 다이어그램

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    Math Learning Platform 분석 엔진 v2.0                     │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │                     Layer 1: 데이터 수집 계층                          │  │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │  │
│  │  │ 시험지 스캔 │  │ 성적 데이터 │  │ 수업 기록  │  │ 학생 메타  │   │  │
│  │  │   (이미지)  │  │   (CSV)    │  │  (수동)    │  │   데이터    │   │  │
│  │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘   │  │
│  └─────────┼────────────────┼────────────────┼────────────────┼──────────┘  │
│            │                │                │                │             │
│            ▼                ▼                ▼                ▼             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │                   Layer 2: 데이터 저장 (Supabase)                      │  │
│  │                                                                       │  │
│  │  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐  │  │
│  │  │   students   │ │  exam_master │ │ item_master  │ │item_response │  │  │
│  │  └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘  │  │
│  │  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐                   │  │
│  │  │   reports    │ │class_sessions│ │ assignments  │                   │  │
│  │  └──────────────┘ └──────────────┘ └──────────────┘                   │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                      │                                      │
│                                      ▼                                      │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │                  Layer 3: 분석 엔진 (핵심)                             │  │
│  │                                                                       │  │
│  │  ┌─────────────────────────────────────────────────────────────────┐  │  │
│  │  │              3A. LLM 기반 분석 (Gemini API)                      │  │  │
│  │  │  • 시험지 이미지 분석                                           │  │  │
│  │  │  • 5-관점 심층 분석 (사고출발점, 풀이과정, 계산패턴 등)          │  │  │
│  │  │  • 5-요소 처방 (무엇을, 어디서, 얼마나, 어떻게, 측정방법)        │  │  │
│  │  └─────────────────────────────────────────────────────────────────┘  │  │
│  │                                                                       │  │
│  │  ┌─────────────────────────────────────────────────────────────────┐  │  │
│  │  │              3B. 통계 기반 분석 (SQL + Python)                   │  │  │
│  │  │  • Topic별 정답률 집계                                          │  │  │
│  │  │  • 오답 유형 분포 분석                                          │  │  │
│  │  │  • 성적 추이 분석                                               │  │  │
│  │  │  • 학생 군집화 (K-means)                                        │  │  │
│  │  └─────────────────────────────────────────────────────────────────┘  │  │
│  │                                                                       │  │
│  │  ┌─────────────────────────────────────────────────────────────────┐  │  │
│  │  │         3C. Knowledge Tracing (Phase 2 이후)                     │  │  │
│  │  │  • BKT (Bayesian Knowledge Tracing) - 소규모 데이터용           │  │  │
│  │  │  • 개념별 마스터리 확률 추정                                    │  │  │
│  │  │  • 다음 문제 정답 확률 예측                                     │  │  │
│  │  └─────────────────────────────────────────────────────────────────┘  │  │
│  │                                                                       │  │
│  │  ┌─────────────────────────────────────────────────────────────────┐  │  │
│  │  │         3D. VEHME 연동 (PoC 후 결정)                             │  │  │
│  │  │  • 손글씨 수학 답안 자동 채점                                   │  │  │
│  │  │  • 풀이 과정 분석                                               │  │  │
│  │  └─────────────────────────────────────────────────────────────────┘  │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                      │                                      │
│                                      ▼                                      │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │                  Layer 4: 추천 엔진                                    │  │
│  │                                                                       │  │
│  │  Phase 1: 규칙 기반 추천                                              │  │
│  │  ┌─────────────────────────────────────────────────────────────────┐  │  │
│  │  │  if (취약개념_존재) → 기초 문제 추천                            │  │  │
│  │  │  if (정답률 > 85%) → 도전 문제 추천                             │  │  │
│  │  │  if (계산실수_빈도 > 30%) → 연습 문제 추천                      │  │  │
│  │  └─────────────────────────────────────────────────────────────────┘  │  │
│  │                                                                       │  │
│  │  Phase 3+ (데이터 1,000건 이상 시): Contextual Bandit                 │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                      │                                      │
│                                      ▼                                      │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │                  Layer 5: 프레젠테이션 계층                            │  │
│  │                                                                       │  │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │  │
│  │  │  선생님     │  │  학부모     │  │  학생       │  │  PDF 리포트 │   │  │
│  │  │  대시보드   │  │  대시보드   │  │  대시보드   │  │  내보내기   │   │  │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 기술 스택 상세

| 계층 | 기술 | 선택 이유 |
|------|------|----------|
| 프론트엔드 | Next.js 16 + TypeScript | 현재 스택 유지 |
| 백엔드/DB | Supabase (PostgreSQL) | 현재 스택 유지, RLS 활용 |
| LLM 분석 | Google Gemini API | 이미지 분석 + 텍스트 생성 |
| ML 분석 | Python (FastAPI) | scikit-learn, pyBKT |
| 시각화 | Recharts | 현재 스택 유지 |
| 이미지 처리 | VEHME API (PoC) | 손글씨 채점 특화 |

---

## 4. Phase별 상세 구현 계획

### Phase 0: 현재 시스템 안정화 (1-2주)

**목표**: 현재 LLM 기반 분석 품질 향상 및 버그 수정

| 작업 | 상세 내용 | 담당 |
|------|----------|------|
| 프롬프트 최적화 | 5-관점 분석 일관성 향상 | 개발팀 |
| UI/UX 개선 | 대시보드, 리포트 관리 완성 | 개발팀 |
| 테스트 | 전체 플로우 QA | QA |

**산출물**:
- 안정화된 v1.0 릴리스

---

### Phase 1: 데이터 인프라 구축 (2-4주)

**목표**: ML 분석을 위한 구조화된 데이터 수집 체계 구축

#### 1.1 신규 테이블 생성

```sql
-- 시험 메타데이터
CREATE TABLE exam_master (
  id SERIAL PRIMARY KEY,
  exam_id VARCHAR(50) UNIQUE NOT NULL, -- 예: EX25F_MOCK2
  test_name VARCHAR(200) NOT NULL,
  test_date DATE,
  max_score INTEGER DEFAULT 100,
  grade INTEGER,
  test_range TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);

-- 문항 메타데이터
CREATE TABLE item_master (
  id SERIAL PRIMARY KEY,
  exam_id VARCHAR(50) REFERENCES exam_master(exam_id),
  item_no INTEGER NOT NULL,
  item_id VARCHAR(50) UNIQUE NOT NULL, -- 예: EX25F_M2_Q06
  score INTEGER NOT NULL,
  chapter VARCHAR(100), -- 평면도형, 입체도형
  topic VARCHAR(100), -- 원, 삼각형
  subtopic VARCHAR(100), -- 원주각, 합동
  difficulty VARCHAR(10), -- 상, 중, 하
  has_diagram BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT NOW()
);

-- 학생 문항별 응답
CREATE TABLE item_response (
  id SERIAL PRIMARY KEY,
  student_id INTEGER REFERENCES students(id),
  exam_id VARCHAR(50) REFERENCES exam_master(exam_id),
  item_id VARCHAR(50) REFERENCES item_master(item_id),
  is_correct BOOLEAN,
  score_earned INTEGER,
  time_seconds INTEGER, -- 풀이 시간 (초)
  error_type VARCHAR(50), -- 개념오류, 계산실수, 조건누락 등
  solution_quality VARCHAR(50), -- 정답, 부분정답, 오답
  image_path TEXT, -- 스캔 이미지 경로
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(student_id, exam_id, item_id)
);

-- 학생별 개념 마스터리 (집계)
CREATE TABLE concept_mastery (
  id SERIAL PRIMARY KEY,
  student_id INTEGER REFERENCES students(id),
  concept VARCHAR(100) NOT NULL, -- topic 또는 subtopic
  mastery_level DECIMAL(5,4), -- 0.0000 ~ 1.0000
  problem_count INTEGER DEFAULT 0,
  correct_count INTEGER DEFAULT 0,
  last_updated TIMESTAMP DEFAULT NOW(),
  UNIQUE(student_id, concept)
);
```

#### 1.2 데이터 입력 UI

- 시험 분석 시 `item_response` 자동 생성 (Gemini 분석 결과 파싱)
- 선생님용 문항 태깅 UI (chapter, topic, difficulty)

#### 1.3 피처 집계 파이프라인

```python
# 예시: 학생별 취약 개념 집계
def calculate_concept_mastery(student_id):
    results = db.query("""
        SELECT
            im.topic,
            COUNT(*) as total,
            SUM(CASE WHEN ir.is_correct THEN 1 ELSE 0 END) as correct
        FROM item_response ir
        JOIN item_master im ON ir.item_id = im.item_id
        WHERE ir.student_id = %s
        GROUP BY im.topic
    """, [student_id])

    for r in results:
        mastery = r.correct / r.total if r.total > 0 else 0
        db.upsert('concept_mastery', {
            'student_id': student_id,
            'concept': r.topic,
            'mastery_level': mastery,
            'problem_count': r.total,
            'correct_count': r.correct
        })
```

**산출물**:
- 신규 DB 스키마
- 데이터 입력 UI
- 피처 집계 배치 작업

---

### Phase 2: 기초 ML 분석 도입 (4-6주)

**목표**: Knowledge Tracing 및 군집화 기능 추가

#### 2.1 학생 군집화 (K-means)

```python
from sklearn.cluster import KMeans
from sklearn.preprocessing import StandardScaler

def cluster_students():
    # 피처: topic별 정답률, 평균 풀이시간, 오답유형 비율
    features = get_student_features()  # DataFrame

    scaler = StandardScaler()
    X = scaler.fit_transform(features)

    kmeans = KMeans(n_clusters=3, random_state=42)
    clusters = kmeans.fit_predict(X)

    # 클러스터 라벨링 (예시)
    cluster_labels = {
        0: '고득점_빠른풀이',
        1: '개념결손',
        2: '계산실수_빈발'
    }

    return clusters, cluster_labels
```

**활용**:
- 대시보드에 학생 유형 표시
- 유형별 추천 전략 차별화

#### 2.2 Bayesian Knowledge Tracing (BKT)

```python
from pyBKT.models import Model

def train_bkt_model():
    # 데이터 형식: student_id, skill, correct (0/1), order
    data = load_item_responses()

    model = Model(seed=42)
    model.fit(data=data)

    # 예측: 다음 문제 정답 확률
    predictions = model.predict(data=new_data)

    return model, predictions
```

**BKT 파라미터**:
- P(L0): 사전 지식 확률
- P(T): 전이 확률 (배우게 될 확률)
- P(G): 추측 확률
- P(S): 실수 확률

**활용**:
- 개념별 마스터리 확률 계산
- "이 문제를 맞힐 확률: 72%" 형태로 표시
- 마스터리 < 50% 개념 자동 하이라이트

---

### Phase 3: 고급 기능 및 VEHME 연동 (6-8주)

**목표**: VEHME PoC 및 추천 시스템 고도화

#### 3.1 VEHME 연동 PoC

(상세 내용은 섹션 5 참조)

#### 3.2 규칙 기반 추천 시스템

```python
def recommend_next_problems(student_id):
    mastery = get_concept_mastery(student_id)
    recent_errors = get_recent_error_types(student_id)

    recommendations = []

    # 규칙 1: 취약 개념 우선
    weak_concepts = [c for c, m in mastery.items() if m < 0.5]
    if weak_concepts:
        recommendations.append({
            'strategy': '기초 복습',
            'concepts': weak_concepts[:3],
            'difficulty': '하'
        })

    # 규칙 2: 계산 실수 빈발
    if recent_errors.get('계산실수', 0) > 0.3:
        recommendations.append({
            'strategy': '연습 문제',
            'type': '계산 집중',
            'difficulty': '중'
        })

    # 규칙 3: 전체 정답률 높음
    if mastery.get('average', 0) > 0.85:
        recommendations.append({
            'strategy': '도전 문제',
            'difficulty': '상'
        })

    return recommendations
```

---

### Phase 4: 지속적 개선 (장기)

| 조건 | 도입 기술 |
|------|----------|
| 학생 50명+, 응답 5,000건+ | DKT (Deep Knowledge Tracing) |
| 학생 100명+, 응답 20,000건+ | Contextual Bandit |
| 학생 500명+, 응답 100,000건+ | Full RL (DQN) 재검토 |

---

## 5. VEHME 연동 계획

### 5.1 VEHME 개요

- **개발**: 포항공과대학교(POSTECH) 고성안 교수팀
- **기능**: 손글씨 수학 답안 자동 채점
- **기술**: Vision Transformer 기반 멀티모달 모델

### 5.2 연동 가능성 평가

| 항목 | 상태 | 비고 |
|------|------|------|
| API 공개 여부 | ❓ 확인 필요 | 학술용 vs 상용 |
| 응답 속도 | ❓ 확인 필요 | 실시간 vs 배치 |
| 비용 | ❓ 확인 필요 | 무료 vs 유료 |
| 정확도 | ⭐⭐⭐⭐ | 논문 기준 90%+ |

### 5.3 PoC 계획

#### Step 1: 접근성 확인 (1주)
- POSTECH 연구팀 컨택
- API 또는 모델 가중치 접근 가능 여부 확인
- 라이선스 조건 확인

#### Step 2: 테스트 환경 구축 (1-2주)
- 테스트 이미지 준비 (시험지 스캔 10-20장)
- API 연동 또는 로컬 모델 설치
- 정확도 및 응답 속도 측정

#### Step 3: 통합 설계 (필요시)
```
┌─────────────────────────────────────────────────────────────┐
│                   VEHME 연동 아키텍처                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  시험지 이미지                                               │
│       │                                                     │
│       ▼                                                     │
│  ┌─────────────┐      ┌─────────────┐      ┌─────────────┐ │
│  │ 이미지 전처리│  →   │ VEHME API  │  →   │ 결과 파싱   │ │
│  │ (crop, 회전)│      │ (채점 요청) │      │ (정오답+점수)│ │
│  └─────────────┘      └─────────────┘      └─────────────┘ │
│                                                     │       │
│                                                     ▼       │
│                              ┌─────────────────────────────┐│
│                              │ Gemini 분석과 통합          ││
│                              │ - VEHME: 정오답 판정        ││
│                              │ - Gemini: 오류 원인 분석    ││
│                              └─────────────────────────────┘│
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 5.4 예상 효과

| 항목 | 현재 | VEHME 도입 후 |
|------|------|--------------|
| 채점 정확도 | 수동 (100%) | 자동 (90%+) |
| 채점 시간 | 10분/장 | 10초/장 |
| 풀이 과정 분석 | Gemini 의존 | VEHME + Gemini 조합 |

---

## 6. 데이터 요구사항 및 스키마

### 6.1 최종 ERD

```
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│   students   │     │  exam_master │     │ item_master  │
├──────────────┤     ├──────────────┤     ├──────────────┤
│ id (PK)      │     │ id (PK)      │     │ id (PK)      │
│ student_id   │     │ exam_id (UK) │     │ exam_id (FK) │
│ name         │     │ test_name    │     │ item_id (UK) │
│ grade        │     │ test_date    │     │ item_no      │
│ parent_id    │     │ max_score    │     │ score        │
│ ...          │     │ ...          │     │ chapter      │
└──────┬───────┘     └──────┬───────┘     │ topic        │
       │                    │             │ difficulty   │
       │                    │             └──────┬───────┘
       │                    │                    │
       │     ┌──────────────┴────────────────────┘
       │     │
       ▼     ▼
┌──────────────────────────────────┐
│         item_response            │
├──────────────────────────────────┤
│ id (PK)                          │
│ student_id (FK) ─────────────────┼──→ students
│ exam_id (FK) ────────────────────┼──→ exam_master
│ item_id (FK) ────────────────────┼──→ item_master
│ is_correct                       │
│ score_earned                     │
│ time_seconds                     │
│ error_type                       │
│ solution_quality                 │
│ image_path                       │
└──────────────────────────────────┘
       │
       ▼
┌──────────────────────────────────┐
│        concept_mastery           │
├──────────────────────────────────┤
│ id (PK)                          │
│ student_id (FK)                  │
│ concept                          │
│ mastery_level                    │
│ problem_count                    │
│ correct_count                    │
│ last_updated                     │
└──────────────────────────────────┘
```

### 6.2 데이터 요구량 추정

| Phase | 최소 데이터 | 권장 데이터 | 현재 상태 |
|-------|-----------|-----------|----------|
| Phase 1 | 시험 5회 × 학생 20명 | 시험 10회 × 학생 25명 | 충족 예상 |
| Phase 2 (BKT) | 응답 500건 | 응답 1,000건 | 축적 필요 |
| Phase 3 (추천) | 응답 2,000건 | 응답 5,000건 | 축적 필요 |
| Phase 4 (RL) | 응답 50,000건 | 응답 100,000건 | 장기 목표 |

---

## 7. 리스크 및 대응 방안

### 7.1 기술 리스크

| 리스크 | 발생 확률 | 영향도 | 대응 방안 |
|--------|----------|--------|----------|
| VEHME API 접근 불가 | 중간 | 중간 | Gemini Vision 활용 유지 |
| BKT 정확도 미달 | 낮음 | 중간 | 규칙 기반 백업 유지 |
| 데이터 품질 저하 | 중간 | 높음 | 데이터 검증 자동화 |
| 성능 저하 (응답 속도) | 낮음 | 높음 | 캐싱 및 비동기 처리 |

### 7.2 비즈니스 리스크

| 리스크 | 발생 확률 | 영향도 | 대응 방안 |
|--------|----------|--------|----------|
| 사용자 이탈 | 낮음 | 높음 | 점진적 기능 출시, 피드백 수집 |
| 경쟁 플랫폼 등장 | 중간 | 중간 | 차별화 기능 개발 (VEHME 연동) |
| 비용 초과 | 낮음 | 중간 | Supabase 무료 티어 활용 유지 |

---

## 8. KPI 및 성공 지표

### 8.1 기술 KPI

| 지표 | 현재 | Phase 1 목표 | Phase 2 목표 |
|------|------|-------------|-------------|
| 분석 정확도 (LLM) | 측정 필요 | 85%+ | 90%+ |
| 마스터리 예측 정확도 | N/A | N/A | 75%+ (AUC) |
| 시스템 응답 시간 | 3-5초 | 3초 이하 | 2초 이하 |
| 데이터 입력률 | 0% | 50% | 80% |

### 8.2 비즈니스 KPI

| 지표 | 현재 | 6개월 목표 | 12개월 목표 |
|------|------|----------|-----------|
| 활성 학생 수 | 25명 | 40명 | 60명 |
| 리포트 생성 수 (월) | 10건 | 30건 | 60건 |
| 학부모 만족도 | 측정 필요 | 80%+ | 90%+ |
| 학생 성적 향상률 | 측정 필요 | 10%+ | 15%+ |

---

## 9. 일정 및 마일스톤

```
2025년
───────────────────────────────────────────────────────────────────────
  1월     2월     3월     4월     5월     6월     7월     8월
───────────────────────────────────────────────────────────────────────
  │       │       │       │       │       │       │       │
  ├───────┤       │       │       │       │       │       │
  │Phase 0│       │       │       │       │       │       │
  │안정화 │       │       │       │       │       │       │
  │       ├───────┴───────┤       │       │       │       │
  │       │   Phase 1     │       │       │       │       │
  │       │ 데이터 인프라 │       │       │       │       │
  │       │               ├───────┴───────┼───────┤       │
  │       │               │   Phase 2     │       │       │
  │       │               │  ML 분석 도입 │       │       │
  │       │               │               ├───────┴───────┤
  │       │               │               │   Phase 3     │
  │       │               │               │ VEHME + 추천  │
  │       │               │               │               │
───────────────────────────────────────────────────────────────────────

주요 마일스톤:
  ★ 1월 말: v1.0 안정화 릴리스
  ★ 3월 말: 데이터 파이프라인 완성
  ★ 5월 말: BKT 모델 적용
  ★ 8월 말: VEHME PoC 완료
```

---

## 부록 A: 참고 문헌

1. Corbett, A. T., & Anderson, J. R. (1994). Knowledge tracing: Modeling the acquisition of procedural knowledge. *User Modeling and User-Adapted Interaction*.

2. Piech, C., et al. (2015). Deep Knowledge Tracing. *NIPS*.

3. 고성안 교수팀 VEHME 논문 (확인 필요)

---

## 부록 B: 용어 정의

| 용어 | 정의 |
|------|------|
| BKT | Bayesian Knowledge Tracing - 베이지안 기반 지식 추적 모델 |
| DKT | Deep Knowledge Tracing - 딥러닝 기반 지식 추적 모델 |
| RL | Reinforcement Learning - 강화학습 |
| MAB | Multi-Armed Bandit - 다중 슬롯머신 문제 |
| VEHME | 손글씨 수학 답안 채점 AI 모델 (POSTECH) |

---

**문서 끝**
