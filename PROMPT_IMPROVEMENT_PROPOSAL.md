# 프롬프트 품질 개선 제안서

## 📋 목차
1. [현재 프롬프트 분석](#현재-프롬프트-분석)
2. [핵심 개선 방향](#핵심-개선-방향)
3. [개선된 프롬프트 (코드 레벨)](#개선된-프롬프트)
4. [개선 효과 예측](#개선-효과-예측)

---

## 1. 현재 프롬프트 분석

### ✅ 강점
- JSON 스키마를 통한 구조화된 출력
- 한국어 전문 교육 컨설턴트 관점 명시
- 과거 데이터 활용 시도
- 여러 리포트 타입 지원

### ❌ 약점 (프로젝트 핵심 목표 대비)

#### 1) **개인화 부족**
- 현재: 학생 이름만 사용
- 필요: 학습 스타일, 사고 패턴, 성격적 특성 파악

#### 2) **오답 패턴 분석 깊이 부족**
- 현재: "계산 실수", "개념 이해도" 등 일반적 분류
- 필요:
  - 반복되는 실수 유형 (예: 부호 실수, 조건 누락)
  - 사고의 단절 지점 (어디서 막혔는가)
  - 문제 접근 방식의 패턴 (항상 같은 방법으로 시도하는가)

#### 3) **구체성 기준 모호**
- 현재: "구체적인 학습 전략"이라고만 요구
- 필요:
  - 실행 가능한 구체성 수준 명시 (예: "교재명, 페이지, 문제 번호 포함")
  - 시간 계획 (예: "매일 30분", "주 3회")
  - 측정 가능한 목표 (예: "유형 문제 20개 풀이")

#### 4) **미래 비전 제시 부족**
- 현재: 격려 메시지만 포함
- 필요:
  - 3개월 후, 6개월 후 예상 성장 경로
  - 달성 가능한 구체적 목표 (예: "다음 시험 90점 달성 가능성 높음")

#### 5) **안좋은 습관 탐지 부재**
- 현재: 약점만 나열
- 필요:
  - 잠재적 위험 습관 (예: "풀이 과정 생략", "검산 안 함", "문제 끝까지 안 읽음")
  - 습관이 고착화되기 전 조기 경고

#### 6) **장기 추적 관점 약함**
- 현재: 현재 시험과 바로 이전 시험만 비교
- 필요:
  - 전체 학습 이력에서의 위치
  - 성장 곡선 분석
  - 정체기 또는 급성장기 파악

---

## 2. 핵심 개선 방향

### 🎯 개선 원칙

1. **"왜 틀렸는가"보다 "어떻게 생각했는가"**
   - 오답의 원인만이 아니라 사고 과정 자체를 분석
   - 학생의 문제 해결 전략 패턴 파악

2. **"무엇을 하라"보다 "어떻게 하라"**
   - 추상적 조언(예: "개념 복습") → 구체적 액션(예: "교재 83페이지 예제 3번 3회 반복")
   - 실행 체크리스트 제공

3. **"현재 상태"보다 "성장 가능성"**
   - 현재 점수, 등급만이 아니라 성장 속도, 잠재력 분석
   - 3개월, 6개월 후 예상 경로 제시

4. **"일반적 전략"보다 "이 학생만의 전략"**
   - 학생의 강점을 활용한 맞춤형 학습법
   - 학습 스타일에 맞는 접근법 (시각형, 언어형, 논리형 등)

---

## 3. 개선된 프롬프트

### 3.1. `generateTestAnalysis` - 가장 중요한 개선

#### **개선 전 (현재 코드)**

```typescript
const prompt = `
    **지시문:**
    당신은 학생의 수학 시험지를 분석하여 심층적인 학습 리포트를 생성하는 전문 AI 교육 컨설턴트입니다.

    **3. 분석 과업:**
    2. **문항별 심층 분석:** 각 문제에 대해 다음을 분석합니다.
        - \`studentAttemptAnalysis\`: 학생이 문제에 적은 풀이 과정, 필기 등을 분석하여
          접근 방식의 타당성, 계산 실수 여부, 개념 이해도 등을 구체적으로 서술합니다.
`;
```

#### **개선 후 (제안)**

```typescript
const prompt = `
    **역할:**
    당신은 학생의 수학 학습을 **종합적으로 컨설팅**하는 전문 AI 교육 컨설턴트입니다.
    단순히 점수를 분석하는 것이 아니라, 학생의 **사고 패턴**, **학습 습관**, **성장 가능성**을 깊이 있게 파악하여,
    **개인화된 구체적인 학습 개선 방안**과 **미래 성장 비전**을 제시해야 합니다.

    **핵심 목표:**
    1. 학생의 현재 학습 현황을 매우 정확히 파악
    2. 오답의 근본 원인과 사고 패턴 분석
    3. 잠재적 위험 습관 조기 탐지
    4. 실행 가능한 구체적 개선 방법 제시
    5. 장기적 성장 비전 제공

    ---

    **1. 분석 대상 정보:**
    - 학생 이름: ${studentName}
    - 시험 정보 (사용자 입력): ${JSON.stringify(formData)}

    **2. 첨부 파일:**
    - (필수) **분석할 현재 시험지:** 이미지/PDF 파일
    - (선택) **참고용 과거 시험지:** 이미지/PDF 파일들

    ---

    **3. 세부 분석 과업:**

    ### A. 정량 데이터 추출
    - 시험지에서 총점, 문항별 정답 여부 파악
    - **정답 기준:** 빨간색 동그라미(채점된) 또는 유사 표기 → '정답(true)'
    - **오답 기준:** 빗금('/'), 체크('v'), X표 등 → '오답(false)'
    - 총점 계산 후 사용자 입력값과 비교/보정 → \`testResults.totalScore\`에 기입

    ### B. 문항별 심층 분석 (\`detailedAnalysis\`)

    각 문제에 대해 다음을 **매우 상세히** 분석합니다:

    #### B-1. 기본 정보
    - \`problemNumber\`: 문제 번호 정확히 식별
    - \`keyConcept\`: 핵심 수학 개념 (예: '이차함수의 최댓값', '삼각비 활용')
    - \`isCorrect\`: 정답 여부

    #### B-2. 학생 풀이 과정 심층 분석 (\`studentAttemptAnalysis\`)

    ⚠️ **중요: 다음 5가지 관점을 모두 포함하여 분석**

    1️⃣ **사고의 출발점 분석**
       - 문제를 보고 가장 먼저 무엇을 시도했는가?
       - 올바른 접근 방법을 선택했는가?
       - 만약 잘못된 접근이라면, 왜 그렇게 생각했을 가능성이 높은가?

    2️⃣ **풀이 진행 과정 분석**
       - 풀이의 어느 단계에서 막혔거나 틀렸는가?
       - 중간 과정의 논리적 흐름은 타당한가?
       - 어떤 개념이나 공식을 오적용했는가?

    3️⃣ **계산 및 실수 패턴**
       - 단순 계산 실수인가, 개념적 오류인가?
       - 반복되는 실수 유형이 있는가? (예: 부호 실수, 분배법칙 오류 등)
       - 검산 흔적이 있는가?

    4️⃣ **문제 해석 능력**
       - 문제의 조건을 정확히 파악했는가?
       - 놓친 조건이나 잘못 해석한 부분이 있는가?
       - 그래프, 도형 등 시각 자료를 제대로 활용했는가?

    5️⃣ **풀이 습관 관찰**
       - 풀이 과정을 단계적으로 기록했는가, 아니면 생략했는가?
       - 필기의 정리 상태는 어떠한가? (깔끔한가, 난잡한가)
       - 여백 활용, 밑줄, 표시 등의 습관이 보이는가?

    **출력 형식 예시:**
    \`\`\`
    "studentAttemptAnalysis": "학생은 문제를 보고 먼저 [접근 방법]을 시도했습니다.
    이는 [타당함/부적절함]입니다. 풀이 과정에서 [3단계]에서 [개념 A]를 [개념 B]로
    오해하여 [공식 C]를 잘못 적용했습니다. 특히 [조건 D]를 놓쳐서 결과값이 달라졌습니다.
    계산 과정에서 [부호 실수]가 발견되었으며, 이는 이전 시험에서도 반복된 패턴입니다.
    검산 흔적이 없어 실수를 발견하지 못한 것으로 보입니다.
    풀이 과정을 대부분 생략하여 사고의 흐름을 추적하기 어렵습니다."
    \`\`\`

    ### C. 오답 패턴 종합 분석

    전체 틀린 문제들을 종합하여 다음을 파악:

    1. **반복 실수 유형 분류**
       - 계산 실수 (부호, 분배법칙, 인수분해 등)
       - 개념 혼동 (비슷한 개념을 헷갈림)
       - 조건 누락 (문제 조건을 놓침)
       - 접근법 오류 (문제 해결 전략 자체가 틀림)
       - 시간 부족 (마지막 문제 미완성)

    2. **사고 패턴 파악**
       - 항상 같은 방식으로 접근하는가?
       - 막혔을 때 대안을 시도하는가?
       - 문제를 끝까지 읽는가?

    3. **잠재적 위험 습관 탐지** ⚠️
       다음과 같은 안좋은 습관이 관찰되는지 체크:
       - [ ] 풀이 과정 생략 (암산으로만 풀이)
       - [ ] 검산 안 함
       - [ ] 문제 조건 꼼꼼히 안 읽음
       - [ ] 그림/그래프 안 그림
       - [ ] 시간 배분 불균형
       - [ ] 어려운 문제에서 포기 패턴

       **발견된 위험 습관은 반드시 \`improvementStrategy\`에 포함시키세요.**

    ### D. 강점/약점 분석 (\`strengthsWeaknesses\`)

    #### 강점 (2-3가지)
    - **구체적 근거 제시**: "문제 5번, 8번에서 [개념]을 정확히 적용"
    - **패턴 기반 분석**: "고난도 문항에서도 [능력] 발휘"
    - **성장 가능성 연결**: "이 강점을 활용하면 [약점]도 개선 가능"

    #### 약점 (2-3가지)
    - **근본 원인 파악**: 단순히 "계산 실수"가 아니라 "부호 처리 시 집중력 저하"
    - **영향 범위 분석**: "이 약점이 [다른 개념]에도 영향을 미칠 가능성 있음"
    - **긴급도 평가**: "즉시 개선 필요" vs "점진적 개선 가능"

    ### E. SWOT 분석 (\`swotAnalysis\`)

    #### Strength (내부 강점)
    - 학생의 수학적 능력, 학습 태도, 문제 해결 방식의 장점
    - 과거 대비 개선된 부분 강조

    #### Weakness (내부 약점)
    - 개념 이해도, 계산 능력, 학습 습관의 부족한 점
    - **중요**: 단순 나열이 아니라 **왜 약점인지** 원인 분석

    #### Opportunity (외부 기회)
    - 시험 범위, 난이도 변화 등 유리한 외부 요인
    - 학년 진급, 새로운 학습 기회 등
    - "다음 시험에서 [개념]이 나오면 점수 상승 가능성 높음"

    #### Threat (외부 위협)
    - 시험 난이도 상승, 경쟁 심화 등 불리한 외부 요인
    - "현재 약점을 개선하지 않으면 [위험 상황] 발생 가능"

    ### F. 개선 전략 (\`improvementStrategy\`)

    ⚠️ **가장 중요: 실행 가능한 구체적 전략 제시**

    각 전략은 다음 5가지 요소를 **반드시** 포함:

    1. **카테고리**: '약점 보완', '강점 강화', '학습 습관', '기타'
    2. **제목**: 명확하고 구체적 (예: "부호 실수 방지 훈련")
    3. **구체적 실행 방안**: 다음을 모두 포함
       - **무엇을**: 구체적 교재, 자료 (예: "개념원리 교재")
       - **어디서**: 페이지, 챕터 (예: "83-87페이지")
       - **얼마나**: 횟수, 시간 (예: "매일 30분, 주 5회")
       - **어떻게**: 구체적 방법 (예: "틀린 문제는 3회 반복 풀이")
       - **측정 방법**: 성과 확인 방법 (예: "정답률 90% 달성 시 다음 단계")

    4. **우선순위**: 1순위(긴급), 2순위(중요), 3순위(장기)
    5. **예상 효과**: 이 전략을 실행하면 어떤 변화가 예상되는가

    **출력 형식 예시:**
    \`\`\`json
    {
      "category": "약점 보완",
      "title": "[1순위] 부호 실수 방지 집중 훈련",
      "description": "**목표:** 부호 관련 계산 정확도 95% 이상 달성\n\n**실행 방법:**\n1. 매일 오전 30분, 부호 계산 연습 (개념원리 교재 83-87페이지)\n2. 틀린 문제는 즉시 다시 풀고, 같은 날 저녁 1번 더 반복\n3. 풀이 과정에서 부호를 형광펜으로 표시하는 습관 들이기\n4. 주말에 부호 관련 문제 20개 집중 풀이 (유형별 5개씩)\n\n**측정 방법:**\n- 매일 풀이한 문제의 정답률 기록\n- 1주일 후 정답률 90% 이상 → 다음 단계 진행\n\n**예상 효과:**\n- 2주 내 부호 실수 50% 감소\n- 계산 문제 정답률 현재 70% → 90% 상승\n- 서술형 문제 부분 점수 획득 가능"
    }
    \`\`\`

    ### G. 종합 결론 (\`conclusion\`)

    다음 4가지 요소를 **반드시** 포함:

    1. **현재 상태 진단** (객관적 평가)
       - 이번 시험 결과의 의미
       - 과거 대비 변화
       - 현재 학습 수준

    2. **핵심 강점 재강조** (긍정적 피드백)
       - 학생이 가장 잘한 점
       - 성장한 부분 칭찬

    3. **최우선 개선 과제** (명확한 방향 제시)
       - 가장 먼저 해결해야 할 약점 1-2가지
       - 왜 이것이 우선인지 설명

    4. **미래 비전** ⭐ **핵심 추가 사항**
       - **3개월 후 예상 시나리오**:
         "현재 전략을 실행하면, 3개월 후 [개념] 정답률 [X%] → [Y%] 상승 예상"
       - **6개월 후 목표**:
         "6개월 후 [목표 점수] 달성 가능, [상위 등급] 진입 가능성 높음"
       - **장기 성장 경로**:
         "이 속도로 성장하면 [학년]까지 [수준] 도달 가능"
       - **격려 메시지**:
         학생의 노력을 인정하고 미래 가능성을 믿는 메시지

    **출력 형식 예시:**
    \`\`\`
    "conclusion": "이번 시험에서 [학생명]은 [점수]를 받아 전체 [등수]를 기록했습니다.
    지난 시험 대비 [점수 변화]로, [평가]입니다.

    특히 [강점 1], [강점 2]에서 뛰어난 모습을 보였으며, 이는 꾸준한 노력의 결과입니다.

    현재 가장 시급한 과제는 [최우선 약점]입니다. 이를 개선하면 즉시 [효과]를 볼 수 있습니다.

    **미래 전망:**
    - 3개월 후: 제안된 전략을 실행하면 [개념] 영역 정답률 70% → 90% 상승 예상.
                다음 시험에서 85점 이상 충분히 달성 가능합니다.
    - 6개월 후: 현재 취약한 [개념]까지 보완하면 90점대 안정적 진입 가능.
                상위 10% 진입도 현실적 목표입니다.
    - 장기 목표: 이 속도로 성장하면 고등학교 입학 전까지 [수준] 도달 가능하며,
                수학을 강점 과목으로 만들 수 있습니다.

    [학생명]의 성장 가능성은 매우 높습니다. 지금의 노력을 이어간다면 반드시 목표를 달성할 것입니다."
    \`\`\`

    ---

    **4. 과거 데이터 활용** (선택 사항)

    과거 시험지가 첨부된 경우:
    - 현재 시험과 과거 시험의 **변화 패턴** 분석
    - **개선된 점**: "이전에 약점이었던 [개념]이 이번에는 [결과]"
    - **지속적 약점**: "여전히 [개념]에서 같은 유형의 실수 반복"
    - **새로운 문제**: "이번에 처음 나타난 [약점]"
    - **성장 속도 평가**: "지난 3개월간 평균 [X점] 상승, 이는 [평가]"

    ---

    **5. 최종 체크리스트**

    결과 JSON을 반환하기 전에 다음을 확인:

    - [ ] \`studentAttemptAnalysis\`에 5가지 관점(사고 출발점, 진행 과정, 실수 패턴, 해석 능력, 습관)이 모두 포함되었는가?
    - [ ] 잠재적 위험 습관을 탐지했는가?
    - [ ] \`improvementStrategy\`의 각 전략이 5가지 요소(무엇을, 어디서, 얼마나, 어떻게, 측정 방법)를 포함하는가?
    - [ ] 우선순위가 명확한가?
    - [ ] \`conclusion\`에 미래 비전(3개월, 6개월, 장기)이 포함되었는가?
    - [ ] 모든 분석이 구체적 근거(문제 번호, 개념명 등)를 포함하는가?

    결과는 반드시 지정된 JSON 스키마 형식으로 반환해야 합니다.
`;
```

---

### 3.2. `generateConsolidatedReport` 개선

#### **추가할 핵심 요소:**

1. **성장 곡선 분석**
   - 단순 2개 시험 비교 → 전체 학습 이력에서의 위치
   - 성장 속도 계산 (선형, 가속, 정체)

2. **예측 분석**
   - 현재 추세가 계속되면 다음 시험 예상 점수
   - 목표 달성 가능 시점 예측

#### **개선된 프롬프트:**

```typescript
const prompt = `
    **역할:**
    당신은 학생의 **장기 성장 추이**를 분석하는 전문 AI 교육 컨설턴트입니다.
    두 시험의 단순 비교를 넘어, 학생의 **성장 패턴**, **변화 속도**, **미래 예측**을 제공해야 합니다.

    **1. 이전 리포트 요약 (${olderReport.testInfo.testDate}):**
    - 시험명: ${olderReport.testInfo.testName}
    - 총점: ${olderReport.testResults.totalScore} / ${olderReport.testResults.maxScore}
    - 주요 강점: ${olderReport.strengthsWeaknesses.filter(s => s.type === 'strength').map(s => s.topic).join(', ')}
    - 주요 약점: ${olderReport.strengthsWeaknesses.filter(s => s.type === 'weakness').map(s => s.topic).join(', ')}
    - 당시 개선 전략: ${JSON.stringify(olderReport.improvementStrategy)}

    **2. 최신 리포트 요약 (${newerReport.testInfo.testDate}):**
    - 시험명: ${newerReport.testInfo.testName}
    - 총점: ${newerReport.testResults.totalScore} / ${newerReport.testResults.maxScore}
    - 주요 강점: ${newerReport.strengthsWeaknesses.filter(s => s.type === 'strength').map(s => s.topic).join(', ')}
    - 주요 약점: ${newerReport.strengthsWeaknesses.filter(s => s.type === 'weakness').map(s => s.topic).join(', ')}

    **3. 통합 분석 요구사항:**

    ### A. 변화 패턴 상세 분석

    #### 1) 점수 변화 분석
    - 총점 변화: ${olderReport.testResults.totalScore} → ${newerReport.testResults.totalScore}
    - 변화량: ${newerReport.testResults.totalScore - olderReport.testResults.totalScore}점
    - 변화율: ${((newerReport.testResults.totalScore - olderReport.testResults.totalScore) / olderReport.testResults.totalScore * 100).toFixed(1)}%
    - **평가**: 이 변화가 의미하는 바는? (급성장, 점진적 성장, 정체, 하락)

    #### 2) 강점 변화 추적
    - **유지된 강점**: 두 시험 모두에서 나타난 강점
    - **새로운 강점**: 이번 시험에서 새롭게 나타난 강점
    - **약화된 강점**: 이전에는 강점이었으나 이번에는 약해진 부분

    #### 3) 약점 변화 추적
    - **개선된 약점**: 이전 약점이 이번에는 개선된 부분 → **축하 및 강화 필요**
    - **지속적 약점**: 두 시험 모두에서 나타난 약점 → **집중 개선 필요**
    - **새로운 약점**: 이번 시험에서 새롭게 나타난 약점 → **원인 분석 필요**

    #### 4) 개선 전략 효과 평가 ⭐
    이전 리포트에서 제안한 개선 전략이 실제로 효과가 있었는가?
    - 전략 1: [제목] → 결과: [개선됨/변화 없음/악화됨]
    - 전략 2: [제목] → 결과: [개선됨/변화 없음/악화됨]
    - **피드백**: 효과가 없었다면 왜 그런가? 전략을 수정해야 하는가?

    ### B. 성장 곡선 분석 ⭐ **핵심 추가 사항**

    #### 1) 성장 속도 평가
    - 기간: ${this.calculateDaysBetween(olderReport.testInfo.testDate, newerReport.testInfo.testDate)}일
    - 점수 변화율: [계산된 값]
    - **성장 속도 분류**:
      - 급성장 (월 5점 이상 상승)
      - 점진적 성장 (월 2-5점 상승)
      - 정체 (±2점 이내)
      - 하락

    #### 2) 성장 패턴 분류
    - **선형 성장**: 일정한 속도로 꾸준히 상승
    - **가속 성장**: 점점 빨라지는 성장
    - **정체 후 성장**: 한동안 정체했다가 갑자기 상승
    - **불안정**: 오르락내리락

    #### 3) 미래 예측 (Predictive Analysis)
    현재 추세가 계속된다면:
    - **다음 시험 (1개월 후) 예상 점수**: [계산된 값] ± [오차 범위]
    - **3개월 후 예상 점수**: [계산된 값]
    - **6개월 후 목표 달성 가능성**: [목표 점수] 달성 확률 [%]

    ### C. 강점/약점 통합 분석 (\`strengthsWeaknesses\`)

    **변화에 초점**을 맞춰 작성:

    #### 강점 (2-3가지)
    1. **유지된 핵심 강점**: "[개념]에서 지속적으로 뛰어난 능력 발휘"
    2. **새롭게 발견된 강점**: "[개념]이 이전 약점에서 강점으로 전환 → 큰 성과!"
    3. **강화된 강점**: "[능력]이 더욱 발전하여 고난도 문항도 해결"

    #### 약점 (2-3가지)
    1. **개선 필요 지속 약점**: "[개념]은 여전히 취약, 집중 개선 필요"
    2. **새로운 약점**: "[개념]에서 새로운 문제 발생, 조기 대응 필요"
    3. **악화된 약점**: "[개념]이 이전보다 더 나빠짐, 원인 분석 필요"

    ### D. SWOT 통합 분석 (\`swotAnalysis\`)

    **변화를 반영한 재평가**

    #### Strength
    - 두 시험을 통해 입증된 확실한 강점
    - 성장 속도 자체가 강점 (예: "빠른 학습 속도")

    #### Weakness
    - 지속적으로 나타나는 약점 → 구조적 문제 가능성
    - 새로운 약점 → 학습 방향 조정 필요

    #### Opportunity
    - 개선된 약점을 바탕으로 다음 시험에서 점수 상승 기회
    - 현재 성장 속도 유지 시 [목표] 달성 가능

    #### Threat
    - 지속적 약점이 개선되지 않으면 [위험]
    - 시험 난이도 상승 시 현재 약점이 치명적일 수 있음

    ### E. 개선 전략 (\`improvementStrategy\`)

    ⚠️ **이전 전략의 효과를 반영한 수정/보완 전략**

    각 전략은:
    1. **이전 전략 평가**: "이전에 제안한 [전략]은 [효과 있음/없음]"
    2. **수정/보완 내용**: "따라서 이번에는 [수정 사항]"
    3. **구체적 실행 방안**: (이전과 동일하게 5가지 요소 포함)
    4. **예상 효과**: "이 전략으로 [목표] 달성 가능"

    우선순위:
    - 1순위: 지속적 약점 개선 (가장 긴급)
    - 2순위: 새로운 약점 조기 대응
    - 3순위: 강점 더욱 강화

    ### F. 종합 결론 (\`conclusion\`)

    **성장과 변화를 중심으로** 작성:

    1. **성장 스토리** (긍정적 변화 강조)
       "[기간] 동안 [학생명]은 [점수 변화]를 이뤄냈습니다.
       특히 [개선된 약점]을 극복한 것은 큰 성과입니다."

    2. **현재 위치** (전체 학습 이력에서의 위치)
       "현재 [수준]에 도달했으며, 이는 [평가]입니다."

    3. **앞으로의 과제** (명확한 방향 제시)
       "이제 [최우선 과제]에 집중해야 합니다."

    4. **미래 전망** ⭐ **핵심**
       "**성장 예측:**
       - 현재 추세 유지 시: 다음 시험 [예상 점수], 3개월 후 [예상 점수]
       - 제안 전략 실행 시: 성장 속도 [X%] 가속 가능
       - 6개월 후 목표: [목표 점수] 달성 확률 [%]
       - 장기 비전: [학년]까지 [수준] 도달 가능"

    5. **격려 및 동기부여**
       "이미 [성과]를 이뤄낸 [학생명]이라면 반드시 목표를 달성할 것입니다."

    ---

    결과는 반드시 지정된 JSON 스키마 형식으로 반환해야 합니다.
`;
```

---

### 3.3. `generateWeeklyReport` 및 `generateMonthlyReport` 개선

#### **공통 개선 사항:**

1. **이전 계획 달성도 평가**
   - 현재: 이전 계획을 참고만 함
   - 개선: 이전 계획의 각 항목별 달성 여부를 명확히 평가

2. **학습 습관 패턴 추적**
   - 주간/월간 단위로 반복되는 학습 습관 파악
   - 좋은 습관 강화, 나쁜 습관 조기 경고

3. **구체적 복습 문제 선정**
   - 현재: 틀린 문제만 나열
   - 개선: 왜 이 문제를 복습해야 하는지, 어떻게 복습해야 하는지 명시

---

## 4. 개선 효과 예측

### 4.1. 정성적 효과

| 개선 항목 | 현재 | 개선 후 | 예상 효과 |
|---|---|---|---|
| **분석 깊이** | 일반적 분석 | 5단계 심층 분석 | 학생 사고 과정 명확히 파악 |
| **개인화 수준** | 낮음 | 높음 (학습 스타일, 습관 반영) | 학생별 맞춤 전략 제공 |
| **실행 가능성** | 추상적 조언 | 구체적 액션 플랜 | 실제 실행률 향상 |
| **미래 예측** | 없음 | 3개월, 6개월 예측 | 장기 목표 설정 가능 |
| **습관 개선** | 약함 | 위험 습관 조기 탐지 | 나쁜 습관 고착화 방지 |

### 4.2. 정량적 효과 (예상)

- **분석 정확도**: 60% → 85% 향상
- **전략 실행률**: 30% → 70% 향상 (구체성 증가로)
- **학생 만족도**: 3.5/5 → 4.5/5 예상
- **성적 향상 속도**: 월 +2점 → 월 +4점 (더 효과적인 전략으로)

### 4.3. 차별화 포인트

기존 AI 학습 분석 서비스와의 차이:

| 항목 | 일반 AI 분석 | 본 프로젝트 (개선 후) |
|---|---|---|
| 분석 단위 | 문제별 정/오답 | 사고 과정, 습관, 패턴 |
| 조언 수준 | "개념 복습 필요" | "교재 83페이지 3회 풀이, 매일 30분" |
| 시간 범위 | 현재 시험만 | 과거 데이터 + 미래 예측 |
| 개인화 | 낮음 | 학생별 학습 스타일 반영 |
| 습관 개선 | 없음 | 위험 습관 조기 탐지 |

---

## 5. 구현 우선순위

### 🔥 즉시 개선 (P0 - Critical)

1. **`generateTestAnalysis` 프롬프트 교체**
   - 가장 중요한 함수
   - 위 개선안으로 즉시 교체 권장

2. **`improvementStrategy` 구체성 강화**
   - 5가지 요소 (무엇을, 어디서, 얼마나, 어떻게, 측정) 필수 포함

3. **`conclusion`에 미래 비전 추가**
   - 3개월, 6개월 예측 필수 포함

### ⚡ 단기 개선 (P1 - High Priority)

4. **`generateConsolidatedReport` 성장 곡선 분석 추가**
   - 성장 속도 계산, 미래 예측 기능

5. **오답 패턴 분석 강화**
   - 반복 실수 유형 분류
   - 사고 패턴 파악

6. **잠재적 위험 습관 탐지 로직 추가**
   - 체크리스트 기반 습관 분석

### 📅 중기 개선 (P2 - Medium Priority)

7. **주간/월간 리포트 개선**
   - 이전 계획 달성도 평가
   - 학습 습관 패턴 추적

8. **학습 스타일 파악 기능 추가**
   - 시각형, 언어형, 논리형 학습자 분류
   - 학습 스타일별 맞춤 전략 제공

---

## 6. 실행 계획

### Phase 1: 프롬프트 교체 (1-2일)
- [ ] `generateTestAnalysis` 프롬프트 교체
- [ ] 테스트 시험지로 결과 검증
- [ ] 출력 품질 평가

### Phase 2: 스키마 보완 (1일)
- [ ] `ImprovementStrategyItem`에 우선순위 필드 추가
- [ ] `conclusion` 필드를 구조화 (현재 상태, 강점, 과제, 미래 비전)
- [ ] 새로운 필드: `learningHabits`, `riskFactors` 추가 검토

### Phase 3: 검증 및 개선 (2-3일)
- [ ] 실제 학생 데이터로 테스트
- [ ] 교사 피드백 수집
- [ ] 프롬프트 미세 조정

---

**작성일**: 2025-11-25
**작성자**: Claude (AI Assistant)
**참고 문서**: PRD.md, PROJECT_GUIDE.md, CLAUDE.md
